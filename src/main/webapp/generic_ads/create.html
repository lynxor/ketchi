<div class="lift:surround?with=default&at=content">
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <div>
        Create a new Ad
    </div>
    <div>
        <script>
            var map = null;

            //Initialise the datepicker
            $(function() {
                var dates = $( "#fromDate, #toDate" ).datepicker({
                    defaultDate: "+1w",
                    changeMonth: true,
                    numberOfMonths: 3,
                    dateFormat: "yy/mm/dd",
                    onSelect: function( selectedDate ) {
                        var option = this.id == "fromDate" ? "minDate" : "maxDate",
                        instance = $( this ).data( "datepicker" );
                        date = $.datepicker.parseDate(
                        instance.settings.dateFormat ||
                            $.datepicker._defaults.dateFormat,
                        selectedDate, instance.settings );
                        dates.not( this ).datepicker( "option", option, date );
                    }
                });
            });

            //initialise the accordion
            $(function() {
                $( "#accordion" ).accordion({
                    change: function(event, ui) {
                        var active = $( "#accordion" ).accordion( "option", "active" );
                        if(active == 1){
                            google.maps.event.trigger(map, 'resize');
                        }
            
                    }
                });
            });

            function initMaps(){
                var latlng = new google.maps.LatLng(-26.195308, 28.043861);
                var myOptions = {
                    zoom: 8,
                    center: latlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

                google.maps.event.addListener(map, 'click', function(event) {
                    $("#the_lat").val(event.latLng.lat());
                    $("#the_long").val(event.latLng.lng());
                    //placeMarker(event.latLng)
                });


            }

            $("#map_canvas").ready(function(){               
                initMaps()
            })
          
            $(document).ready(function(){
                $("input:radio").click(function(){
                    selected_radio = $("input:radio:checked").attr("value")
                    $("#image_input").val(selected_radio);
                })
            })
            
        </script>

        <form class="lift:CreateGenericAd?form=post">

            <div id="accordion">
                <h3><a href="#">General Information</a></h3>
                <div>
                    <table>
                        <tr><td>Header:</td> <td><input name="header" id="the_header" ></td></tr>
                        <tr> <td>Content:</td><td> <input name="content" id="the_content" ></td></tr>
                        <tr> <td>Contact details:</td><td> <input name="contacts" id="the_contacts"></td></tr>
                        <tr> <td>Link to your website: </td><td><input name="link" id="the_link"></td></tr>
                        <tr> <td>Contact email: </td><td><input name="email" id="the_email"></td></tr>
                    </table>
                </div>

                <h3><a id="location_panel" href="#">Location</a></h3>
                <div>
                    <div id="map_canvas" style="height: 400px; width:600px"></div>
                    Lat: <input name="lat" id="the_lat">
                    Long: <input name="long" id="the_long" style="padding-left: 5px"><br>

                </div>

                <h3><a href="#">Time Frame</a></h3>
                <div>
                    From date: <input name="startDate" id="fromDate">
                    to <input name="endDate" id="toDate"><br>

                </div>

                <h3><a href="#">Images</a></h3>
                <div>
                    <input type="hidden" name="imageId" id="image_input" >
                    <table class="lift:ImageListing.asSelectTable">

                        <tr id="select_rows"><td></td></tr>
                        <!--                        <tr><td/><td><input type="button" id="deleteImage" ></td></tr>

                                                <tr><td/><td><input type="button" id="uploadImage"></td></tr>-->
                    </table>
                    <input value="Save" type="submit" >
                </div>
        </form>
    </div>
</div>


